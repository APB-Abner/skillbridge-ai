
-- Esqueleto SQL (ajuste conforme DER)
CREATE TABLE USUARIO (
  ID            NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  NOME          VARCHAR2(120) NOT NULL,
  EMAIL         VARCHAR2(160) UNIQUE NOT NULL,
  PERFIL        VARCHAR2(40)
);

CREATE TABLE SKILL (
  ID   NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  NOME VARCHAR2(120) NOT NULL,
  CATEGORIA VARCHAR2(80)
);

CREATE TABLE USUARIO_SKILL (
  USUARIO_ID NUMBER REFERENCES USUARIO(ID),
  SKILL_ID   NUMBER REFERENCES SKILL(ID),
  NIVEL      NUMBER,
  CONSTRAINT PK_USUARIO_SKILL PRIMARY KEY (USUARIO_ID, SKILL_ID)
);

CREATE TABLE CURSO (
  ID NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  NOME VARCHAR2(160) NOT NULL,
  DURACAO_H NUMBER,
  DIFICULDADE NUMBER
);

CREATE TABLE TRILHA (
  ID NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  NOME VARCHAR2(160) NOT NULL,
  OBJETIVO VARCHAR2(200)
);

CREATE TABLE TRILHA_CURSO (
  TRILHA_ID NUMBER REFERENCES TRILHA(ID),
  CURSO_ID  NUMBER REFERENCES CURSO(ID),
  ORDEM     NUMBER,
  CONSTRAINT PK_TRILHA_CURSO PRIMARY KEY (TRILHA_ID, CURSO_ID)
);

CREATE TABLE MATRICULA (
  ID NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  USUARIO_ID NUMBER REFERENCES USUARIO(ID),
  TRILHA_ID  NUMBER REFERENCES TRILHA(ID),
  STATUS VARCHAR2(30),
  PROGRESSO_PCT NUMBER,
  HORAS_EST NUMBER
);

CREATE TABLE RECOMENDACAO (
  ID NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  USUARIO_ID NUMBER REFERENCES USUARIO(ID),
  TRILHA_ID NUMBER REFERENCES TRILHA(ID),
  SCORE_FIT NUMBER,
  GERADA_EM TIMESTAMP DEFAULT SYSTIMESTAMP
);

CREATE TABLE MENTORIA (
  ID NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  USUARIO_ID NUMBER REFERENCES USUARIO(ID),
  MENTOR VARCHAR2(120),
  DATA_HORA TIMESTAMP,
  STATUS VARCHAR2(30)
);

CREATE TABLE AVALIACAO (
  ID NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  USUARIO_ID NUMBER REFERENCES USUARIO(ID),
  CURSO_ID NUMBER REFERENCES CURSO(ID),
  NOTA NUMBER,
  DATA DATE
);
